(function(e){e.fn.pendulum=function(t){function r(e){var t=document.styleSheets;for(var n=0;n<t.length;++n){for(var r=0;r<t[n].cssRules.length;++r){if(t[n].cssRules[r].selectorText==e)return t[n].cssRules[r]}}return null}function i(e){var t=document.styleSheets;for(var n=0;n<t.length;++n){for(var r=0;r<t[n].cssRules.length;++r){if(t[n].cssRules[r].type==window.CSSRule.WEBKIT_KEYFRAMES_RULE&&t[n].cssRules[r].name==e)return t[n].cssRules[r]}}return null}function o(t,r){var o=i(t);for(var u in o){var l=o[u];if(l instanceof WebKitCSSKeyframeRule){o.deleteRule(l.keyText)}}s.style.webkitAnimationDuration=n.overallDuration+"s";var c=n.period/2;for(var h=0;h<=n.overallDuration;h=h+c){var p=h*(100/n.overallDuration);var d=a(r,n.period,h,n.damping);o.insertRule(p+"% { -webkit-transform: rotate("+d+"deg); }")}o.insertRule("100% { -webkit-transform: rotate(0deg); }");e(".swinger").each(function(){f(e(this))});e(".swinger").each(function(){this.style.webkitAnimationName=t});e(".swinger").each(function(){e(this).css("webkit-transform","rotate(0deg)")})}function u(e,t){t.each(function(){this.style.webkitAnimationName="none"});if(e<-90){e=-90}if(e>90){e=90}setTimeout(function(){o("swinging",e)},0)}function a(e,t,n,r){var i=e*Math.exp(-n/r)*Math.cos(2*Math.PI*n/t);return i}function f(e){var t=e.outerHeight();var n=100;var r=parseFloat(s.style.webkitAnimationDuration.substr(0,s.style.webkitAnimationDuration.length-1));var i=Math.sqrt(e.outerHeight())/Math.sqrt(n);e.css("webkitAnimationDuration",r*i+"s")}var n=e.extend({startingAngle:30,rodLength:100,damping:1.9,period:.9,overallDuration:11.1},t);var s=r(".swinger");return this.each(function(){var t=e(this),r,i;if(!t.hasClass("pendulum-bob")){r=e("<div class='pendulum swinger'>"),i=e("<div class='pendulum-rod'>");r.css("width",t.outerWidth(true));t.addClass("pendulum-bob");t.wrap(r);t.before(i)}else{r=t.parent(),i=r.children(".pendulum-rod")}i.css("height",n.rodLength);u(n.startingAngle,t.parent())})}})(jQuery)